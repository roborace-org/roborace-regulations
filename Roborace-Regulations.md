Версия от 31 октября 2022 г.

# 1. Общие положения

Roborace - это проект робототехнических соревнований. Эти соревнования во многом похожи на соревнования Формулы 1, но с тем отличием, что соревнуются не управляемые пилотами болиды, а полностью автономные роботы. Роботы полагаются на показания своих датчиков, чтобы ориентироваться по трассе (ограниченной бортами), маневрировать, выбирать скорость движения и избегать столкновений с соперниками.

В соревнованиях **Roborace** могут принимать участие команды из любого количества участников.

Возрастные, национальные, территориальные или иные ограничения на участие отсутствуют! Команда имеет право представлять одного или нескольких роботов, о чем необходимо сообщить при регистрации.

Техническое задание соревнований заключается в создании автономного робота, который должен проехать максимальное количество кругов в нужном направлении за отведенное время.

В заездах роботы могут участвовать только после положительного прохождения процедуры допуска.

Роботы занимают место в отборочном заезде согласно результатам квалификации, в случае финала - по результатам отборочных заездов.

Запрещено умышленно наносить повреждения другим роботам.

Во время заезда робот автономный - не может получать данные из внешних информационных источников за исключением системы маяков для подсчета кругов.
# 2. Трасса

Трасса (Рис.1) - поверхность ограниченная бортами (Рис.2).

![Рис.1 – Пример трассы](https://raw.githubusercontent.com/roborace-org/roborace-regulations/master/images/2-1.jpg)

<p align="center">Рис.1 – Пример трассы</p>

На рисунке 2 изображен пример борта трассы.

![Рис.2 – Пример борта трассы](https://raw.githubusercontent.com/roborace-org/roborace-regulations/master/images/2-2.jpg)

<p align="center">Рис.2 – Пример борта трассы</p>


## Требования к размерам трассы:
- ширина трассы 950 - 1300 мм;
- ширина трассы в повороте 950 - 1750 мм;
- борта расположены на краях трассы, высота борта 100 - 200 мм;


## Эстакада

На трассе может быть расположена эстакада, подъем и спуск которой должны иметь угол от горизонта не более чем 20° (Роботы должны иметь возможность преодолевать эстакаду).

## Покрытие и борта трассы

Покрытие трассы и внешние борта могут быть использованы для нанесения рекламных изображений.
Внутренние борта и рамки могут использоваться для нанесения маркеров для езды с использованием камеры.
# 3. Роботы

## Общие положения

* Каждый робот должен иметь уникальное имя. Названия роботов из одного клуба или команды должны быть легко различимы (не должны отличаться только номером)
* Каждого робота необходимо зарегистрировать
* Умышленное нанесение повреждений роботам, игровому полю и любым другим элементам игровой зоны запрещены. 
* Роботы должны быть сделаны из хорошо соединенных частей (части роботов не должны оставаться на игровом поле во время заезда).
* На робота должен быть установлен мягкий бампер из поролона, резины или подобного материала сечением не менее 1 см² по всей длине передней части.


## Размеры

Размеры роботов. Автономная модель робота должна иметь механические возможности преодоления соответствующего расстояния 
с возможными изменениями траектории движения, а также отвечать следующим требованиям:
1. Максимальная ширина - 250 мм, длина - 500 мм, высота - 300 мм.
2. Масса не должна превышать 3 кг.

На рис.3 показаны ограничения для робота:

![Рис.3 – Максимальные габаритные размеры и масса робота](https://raw.githubusercontent.com/roborace-org/roborace-regulations/master/images/3-1.png)

<p align="center">Рис.3 – Максимальные габаритные размеры и масса робота</p>

### Процедура измерения размера робота
1. Участник помещает робота в проверочную рамку/коробку (или надевает рамку/коробку поверх робота)
2. Участник поднимает проверочную рамку/коробку
3. Проверка считается пройденной если робот остается на столе

После старта робот может изменять свой размер и/или положение в пространстве, 
но проекция робота, без управляемых колес, на трассу должна оставаться не более основания проверочной рамки (250х500 мм).   
Высота робота должна оставаться не более 300 мм.

## Источники энергии

* Разрешены любые источники энергии, встроенные в робота (батареи, сжатый воздух, ...), за исключением 
источников энергии, использующей химические реакции, такие как горение или взрыв, которые запрещены по соображениям 
безопасности. Кроме того, запрещено использование коррозионных соединений и распыление жидкостей.
* Если у вас есть сомнения относительно необычного источника энергии, лучше заранее посоветуйтесь с главным судьей.


## Безопасность

### Общие положения

* Все системы должны соответствовать существующим национальным и европейским законам и стандартам. В частности, 
используемые системы должны соответствовать официальным нормам безопасности жизнедеятельности и быть безопасными для 
участников и зрителей во время и вне матчами (например, в боксах команды или в процессе ожидания / подготовки заезда). 
* У роботов не должно быть никаких опасных устройств или острых частей, которые могут стать причиной телесного 
повреждения. 
* Запрещается использование жидких, едких и пиротехнических материалов или живых существ в роботе. 
* Все роботы должны соответствовать официальным стандартам «низкого напряжения». То есть электрическое напряжение, 
используемое в роботе, не должно превышать 48 В. Напряжение выше 48 В может быть использовано только внутри закрытых 
устройств, сделанных промышленным способом (таких, как лазеры, подсветка LCD панели), и только если эти устройства не 
были модифицированы командой, и если они отвечают национальным и Европейским нормативным требованиям. 
* Как правило, любой механизм или система, признанная главным судьей как потенциально опасная, будет запрещена к применению и 
должна быть удалена из робота, иначе команда будет дисквалифицирована с соревнований.

### Лазеры

Лазерные системы рассматриваются на основании классов лазерных устройств (стандарт "EN60825-1:2007, выпуск 2 - 
Безопасность лазерной продукции - Часть 1 - Классификация и требования к оборудованию). Команды, использующие лазеры, 
должны предоставить параметры оборудования согласно классификации или спецификацию компонента с лазером. Без подобных 
документов, робота не допустят к соревнованиям. Согласно классификации, разрешается использовать лазеры класса 1, 1М. 
Лазеры класса 2 и 2М разрешены только в том случае, если лазерный луч ни при каких условиях не будет выходить за пределы 
игровой площадки. Все остальные классы (3R, 3B и 4) строго запрещены. Разборка или изменение устройств, использующих 
источники лазерного излучения, часто ведут к изменению класса устройства. Лазерные устройства должны быть использованы в 
той форме, в которой они доступны на рынке (лазерное устройство = источник излучения + электроника + оптика). При использовании источника света высокой мощности, обратите внимание на то, что он может быть опасен 
для глаз человека при прямом попадании света в глаза. Обратите внимание, что некоторые мощные светодиодные устройства 
могут превышать опасное пороговое ограничение. Будьте ответственны! Ваши роботы выступают перед аудиторией, которая не 
проинформирована об особенностях каждого робота.
# 4. Заезды

Заезды бывают трех типов: квалификационные, отборочные и финальные.

Направление движения по трассе определяет главный судья до начала соревнований (рекомендуется двигаться по часовой стрелке в зоне старта).

## Квалификация

Задача: проехать один круг трассы в нужном направлении. Старт и остановка осуществляется по сигналу судьи. Учитывается минимальное время из не более 3-х попыток. Квалификационные заезды могут осуществляться во время отведенное для тренировок.

Главный судья устанавливает ограничение по времени для квалификационного заезда. Заезд останавливается при достижении заданного времени и попытка не засчитывается.

## Отборочные и финальные заезды

Задача: проехать максимальное количество кругов за установленное время. Старт и остановка осуществляется по сигналу судьи.
Ограничение заездов по времени устанавливается главным судьей соревнований. Рекомендуется выбирать время для отборочных заездов 5-10 минут и для финального заезда 10-20 минут.

## Проведение отборочных и финальных заездов

### Подготовка к заезду

Схема размещения роботов в зоне старта показана на Рис.4. Робот с лучшим результатом квалификации занимает поул-позицию (позиция на старте возле борта, соответствующего ближайшему повороту). 
За поул-позицией становятся роботы с нечетными номерами в заезде, а у противоположного борта трассы с четными.

![Рис.4 – Схема размещения роботов в зоне старта](https://raw.githubusercontent.com/roborace-org/roborace-regulations/master/images/4-1.png)

<p align="center">Рис.4 – Схема размещения роботов в зоне старта</p>

Робот должен начинать движение в начале заезда и после пит-стопа из положения в котором он проходил процедуру допуска, при этом проверочная рамка устанавливается длинной стороной вдоль борта трассы.

Перед началом очередного заезда у каждой команды есть 5 минут, чтобы подготовить робота(ов) к заезду. Робот, который не готов к заезду по истечении 5 минут, дисквалифицируется с него. По готовности команд судья проводит обратный отсчет и старт заезда.

### Старт заезда

Старт роботов происходит с помощью "системы массового старта", при этом робот должен начать движение при получении сигнала от системы.
При ручном запуске (в случае отсутствия системы) представитель команды производит активацию робота после стартового сигнала, при этом робот должен начать движение через 5 секунд. После активации необходимо быстро и аккуратно, не мешая другим роботам и участникам, покинуть трассу. Нахождение участников на трассе после старта недопустимо.

Любые внешние действия участников на трассу, судей, систему подсчета кругов или на робота другой команды могут привести к дисквалификации команды из заезда.

### Подсчет кругов

Подсчет пройденных кругов и времени осуществляет электронная система, при ее отсутствии эту операцию осуществляют судьи. Каждая команда имеет право дублировать подсчет кругов и времени своего робота.

При прохождении роботом финишной линии в нужном направлении количество пройденных кругов увеличивается, при движении в обратном - уменьшается.
Если в момент старта робот движется в обратном направлении - в систему вносится минус 1 круг, с тем расчетом чтобы при пересечении стартовой линии количество кругов стало ноль.

### Остановка заезда

Главный судья имеет право остановить заезд: при выявлении нарушений регламента или по общему согласию участников заезда.
По окончанию времени заезда, робот должен быть снят с трассы представителем команды, при этом судьи фиксируют пройденное количество кругов и затраченное время. Затем судьи объявляют результат каждого робота в заезде.

Главный судья имеет право дисквалифицировать робота по итогам или во время заезда, указав на причины дисквалификации. При этом результаты заезда аннулируются.

Если во время заезда создалась пробка, и роботы не могут продолжать движение, судья может принять решение о ручном урегулировании пробки.

### Пит-стопы

Запрещается трогать роботов после старта.
У каждой команды есть право на неограниченное количество пит-стопов в заезде. Порядок проведения пит-стопа:
1. Заявить судье о необходимости пит-стопа указав номер робота и местоположение
2. Судья снимает робота с трассы и передаёт участнику (или разрешает участнику снять робота)
3. Запускается таймер пит-стопа в 1 минуту. т.е. нельзя продолжать движение (ставить робота на трассу) до окончания времени пит-стопа
4. Участник может отремонтировать робота, заменить запасные части и/или программу
5. Когда время пит-стопа завершено и робот готов продолжать гонку, его можно поставить на трассу в зоне старта не мешая другим роботам.
6. Участник имеет право не возвращать робота после пит-стопа, при этом результат заезда не аннулируется.

## Определение победителя заезда

В заезде выигрывает робот проехавший максимальное количество кругов, или, в случае равенства кругов, робот, затративший наименьшее время для преодоления этих кругов.
# 5. Этапы соревнований

## Допуск к соревнованиям

* Предварительная проверка: перед тем, как выступать на трассе, роботы осматриваются судьей, который проверяет их 
на соответствие правилам (размеры, масса, стартовая пауза 5 секунд и т.д.).
* Квалификация: Роботы проверяются на игровом поле при отсутствии команд-соперников.
* В случае значительных технических изменений (функциональных, структурных, размерных ...), выполненных после прохождения проверки, необходимо сообщить о них судьи. Судьи должны утвердить изменения и, если сочтут необходимым, могут назначить повторную проверку роботу, который был доработан.

## Отборочные заезды - 1 этап
 
* Главный судья определяет количество заездов в этапе 1, в зависимости от количества роботов с тем расчетом, чтобы в каждом заезде было 3-6 роботов.
* В соответствии с отсортированной по возрастанию (времени) таблицей квалификации главный судья соревнований разбивает роботов на заезды. Например, если 8 роботов прошло квалификацию, тогда роботы будут распределены следующим образом: 1 заезд - 1, 3, 5, 7-й роботы; 2 заезд - 2, 4, 6, 8-й роботы.
* После окончания времени заезда судьи фиксируют время и соответствующее ему количество пройденных кругов каждым роботом и заносят их в таблицу общего зачета отборочных заездов.


## Отборочные заезды - 2 этап

* 2-й этап является необязательным и может быть пропущен.
* Во втором этапе отборочных заездов участвуют все роботы, прошедшие квалификацию, независимо от результатов первого отборочного этапа.
* Количество заездов в этапе 2 равно количеству заездов в этапе 1.
* В первом заезде участвуют самые быстрые роботы по времени квалификации, во втором более медленные и т. д. Например, если 8 роботов прошло квалификацию, тогда роботы будут распределены следующим образом: 1 заезд - 1, 2, 3, 4-й роботы; 2 заезд - 5, 6, 7, 8-й роботы.

##  Финальный заезд

* Главный судья определяет количество роботов в финале (3-6) с учетом результатов отборочных заездов.
* В финал выходят роботы проехавшие наибольшее положительное количество кругов в одном из отборочных заездов, в случае равенства количества кругов - проехавшие их за меньшее время.
# 6. Кубок по образовательной робототехнике

Данный пункт определяет особенности проведения Roborace на этапах Кубка по образовательной робототехнике (далее КОР).
Положение о КОР и общий регламент соревнований - [http://roboturnir.by/](http://roboturnir.by/)

## Подкатегории

Roborace на этапах КОР проводится в следующих подкатегориях:

  * **PRO**
    - размеры робота: ширина - 250 мм, длина - 500 мм, высота до 300 мм
    - масса до 3 кг
  * **PRO Mini**
    - размеры робота: ширина - 150 мм, длина - 200 мм, высота до 300 мм
    - масса до 800 грамм
  * **Образовательные конструкторы**
    - роботы удовлетворяют ограничениям, определяемым категорией «образовательные конструкторы», указанным в общем регламенте соревнований, при этом разрешено использование любых камер
    - размеры робота: ширина - 150 мм, длина - 200 мм, высота до 300 мм
    - масса до 1 кг
    - возраст участников до 16 лет в год окончания кубка
  * **Образовательные конструкторы. Junior**
    - размеры робота: ширина - 150 мм, длина - 200 мм, высота до 300 мм
    - масса до 1 кг
    - возраст участников до 12 лет в год окончания кубка
    - 3 квалификационных заезда и финальная часть с парными заездами
    - подробности в отдельном регламенте
  * **PRO Computer Vision**
    - размеры и масса как у PRO категории
    - 3 квалификационных заезда
    - подробности в отдельном регламенте

## Команды

В кубке могут принимать участие команды из 1-2 человек.

## Допуск к соревнованиям PRO, PRO Mini, OK

Для участия в соревнованиях необходимо чтобы робот двигался по трассе со скоростью не менее 50 см/с (за исключением категории Образовательные конструкторы. Junior). 
Главный судья ограничивает время квалификационного заезда с учетом этой скорости и длины трассы по средней линии.

## Ограничение заездов по времени

  * Roborace PRO, PRO Mini и Roborace Образовательные конструкторы
    - 5 минут отборочные заезды
    - 10 минут финал

## Начисление баллов за соревнование

Начисление баллов за квалификацию:
1. Робот с лучшим временем квалификации (best_time) получает 10 баллов
2. Робот проехавший круг за максимально допустимое время (limit_time, время при скорости по средней линии 0.5 м/с) получает 0 баллов
3. Остальные роботы получают баллы от 0 до 10 в соответствие со временем квалификации (time) от допустимого до лучшего времени, и рассчитывается по формуле:
`score = 10 - 10 * (time - best_time) / (limit_time - best_time)`

Начисление баллов за отборочные заезды:
1. Робот проехавший наибольшее количество кругов (max_laps) в одном из отборочных заездов получает 10 баллов
2. Остальные роботы получают баллы от 0 до 10 в соответствие с наибольшим количеством кругов (laps) отборочных заездов от 0 и до наибольшего количества кругов (max_laps), и рассчитывается по формуле:
   `score = 10 * laps / max_laps`
   
Начисление баллов за финальный заезд:

| место |  1  |  2  |  3  |  4  | 5   |  6  |
|-------|-----|-----|-----|-----|-----|-----|
| баллы | 180 | 100 | 60  | 40  | 20  | 0   |


## Определение победителя в КОР

Победитель кубка определяется по максимальному количеству баллов, при этом учитываются результаты нескольких лучших этапов.
Количество этапов идущих в зачет описано в Положении о КОР.
При равенстве баллов следующим критерием является средняя скорость робота в трех финальных заездах, показанная на этапах кубка идущих в зачет.
